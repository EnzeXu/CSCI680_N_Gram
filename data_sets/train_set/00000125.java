public class TapDumpOperationImpl extends TapOperationImpl implements TapOperation { private final String id; TapDumpOperationImpl(String id, OperationCallback cb) { super(cb); this.id = id; } @Override public void initialize() { RequestMessage message = new RequestMessage(); message.setMagic(TapMagic.PROTOCOL_BINARY_REQ); message.setOpcode(TapOpcode.REQUEST); message.setFlags(TapRequestFlag.DUMP); message.setFlags(TapRequestFlag.SUPPORT_ACK); message.setFlags(TapRequestFlag.FIX_BYTEORDER); if (id != null) { message.setName(id); } else { message.setName(UUID.randomUUID().toString()); } setBuffer(message.getBytes()); } @Override public void streamClosed(OperationState state) { transitionState(state); } @Override public String toString() { return "Cmd: tap dump Flags: dump,ack"; } }