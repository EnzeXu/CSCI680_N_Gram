public class CountOutputStream extends OutputStream { OutputStream os ; long bytes = 0 ; public CountOutputStream ( OutputStream os ) { this . os = os ; } @ Override public void close ( ) throws IOException { os . close ( ) ; } @ Override public void flush ( ) throws IOException { os . flush ( ) ; } @ Override public void write ( byte [ ] buffer , int offset , int count ) throws IOException { bytes += count ; os . write ( buffer , offset , count ) ; } @ Override public void write ( byte [ ] buffer ) throws IOException { bytes += buffer . length ; os . write ( buffer ) ; } @ Override public void write ( int oneByte ) throws IOException { bytes++ ; os . write ( oneByte ) ; } }