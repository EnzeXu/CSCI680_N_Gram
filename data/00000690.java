public class Kdb3 { private void testKeyfile(String dbAsset, String keyAsset, String password) throws Exception { Context ctx = InstrumentationRegistry.getInstrumentation().getTargetContext(); File sdcard = Environment.getExternalStorageDirectory(); String keyPath = ctx.getFilesDir().getAbsolutePath() + "/key"; TestUtil.extractKey(ctx, keyAsset, keyPath); AssetManager am = ctx.getAssets(); InputStream is = am.open(dbAsset, AssetManager.ACCESS_STREAMING); ImporterV3 importer = new ImporterV3(); importer.openDatabase(is, password, TestUtil.getKeyFileInputStream(ctx, keyPath)); is.close(); } @Test public void testXMLKeyFile() throws Exception { testKeyfile("kdb_with_xml_keyfile.kdb", "keyfile.key", "12345"); } @Test public void testBinary64KeyFile() throws Exception { testKeyfile("binary-key.kdb", "binary.key", "12345"); } }