public class OperationFactoryTest extends OperationFactoryTestBase { @Override protected OperationFactory getOperationFactory() { return new BinaryOperationFactory(); } public void testGetAndTouchOperationCloning() { GetAndTouchOperation.Callback callback = (GetAndTouchOperation.Callback) mock(GetAndTouchOperation.Callback.class).proxy(); GetAndTouchOperation op = ofact.getAndTouch(TEST_KEY, 0, callback); GetAndTouchOperation op2 = cloneOne(GetAndTouchOperation.class, op); assertKey(op2); assertSame(callback, op2.getCallback()); } public void testTouchOperationCloning() { OperationCallback callback = (OperationCallback) mock(OperationCallback.class).proxy(); TouchOperation op = ofact.touch(TEST_KEY, 0, callback); TouchOperation op2 = cloneOne(TouchOperation.class, op); assertKey(op2); assertSame(callback, op2.getCallback()); } }