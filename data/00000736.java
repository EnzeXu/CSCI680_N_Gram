public class MainSettingsFragement extends PreferenceFragmentCompat { public static boolean KEYFILE_DEFAULT = false; public static void Launch(Context ctx) { Intent i = new Intent(ctx, MainSettingsFragement.class); ctx.startActivity(i); } @Override public void onCreate(@Nullable Bundle savedInstanceState) { super.onCreate(savedInstanceState); setRetainInstance(true); } @Override public void onCreatePreferences(Bundle savedInstanceState, String rootKey) { addPreferencesFromResource(R.xml.preferences); Database db = App.getDB(); if ( !(db.Loaded() && db.pm.appSettingsEnabled()) ) { Preference dbSettings = findPreference(getString(R.string.db_key)); dbSettings.setEnabled(false); } } }