public class LockingFlowListener implements FlowListener { public Semaphore started = new Semaphore( 0 ); public Semaphore stopped = new Semaphore( 0 ); public Semaphore completed = new Semaphore( 0 ); public Semaphore thrown = new Semaphore( 0 ); public LockingFlowListener() { } public void onStarting( Flow flow ) { started.release(); } public void onStopping( Flow flow ) { stopped.release(); } public void onCompleted( Flow flow ) { completed.release(); } public boolean onThrowable( Flow flow, Throwable throwable ) { thrown.release(); return false; } }