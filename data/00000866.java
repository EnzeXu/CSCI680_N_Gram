public class SearchResults extends GroupBaseActivity { private Database mDb ; @ Override protected void onCreate ( Bundle savedInstanceState ) { super . onCreate ( savedInstanceState ) ; if ( isFinishing ( ) ) { return ; } setResult ( KeePass . EXIT_NORMAL ) ; mDb = App . getDB ( ) ; if ( ! mDb . Loaded ( ) ) { finish ( ) ; } performSearch ( getSearchStr ( getIntent ( ) ) ) ; } private void performSearch ( String query ) { query ( query . trim ( ) ) ; } private void query ( String query ) { mGroup = mDb . Search ( query ) ; if ( mGroup == null || mGroup . childEntries . size ( ) < 1 ) { setContentView ( new GroupEmptyView ( this ) ) ; } else { setContentView ( new GroupViewOnlyView ( this ) ) ; } Toolbar toolbar = ( Toolbar ) findViewById ( R . id . toolbar ) ; setSupportActionBar ( toolbar ) ; setGroupTitle ( ) ; setListAdapter ( new PwGroupListAdapter ( this , mGroup ) ) ; } private String getSearchStr ( Intent queryIntent ) { final String queryAction = queryIntent . getAction ( ) ; if ( Intent . ACTION_SEARCH . equals ( queryAction ) ) { return queryIntent . getStringExtra ( SearchManager . QUERY ) ; } return "" ; } }