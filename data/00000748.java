public class PwIconFactory { private ReferenceMap cache = new ReferenceMap ( AbstractReferenceMap . HARD , AbstractReferenceMap . WEAK ) ; private ReferenceMap customCache = new ReferenceMap ( AbstractReferenceMap . HARD , AbstractReferenceMap . WEAK ) ; public PwIconStandard getIcon ( int iconId ) { PwIconStandard icon = ( PwIconStandard ) cache . get ( iconId ) ; if ( icon == null ) { if ( iconId == 1 ) { icon = PwIconStandard . FIRST ; } else { icon = new PwIconStandard ( iconId ) ; } cache . put ( iconId , icon ) ; } return icon ; } public PwIconCustom getIcon ( UUID iconUuid ) { PwIconCustom icon = ( PwIconCustom ) customCache . get ( iconUuid ) ; if ( icon == null ) { icon = new PwIconCustom ( iconUuid , null ) ; customCache . put ( iconUuid , icon ) ; } return icon ; } public PwIconCustom getIcon ( UUID iconUuid , byte [ ] data ) { PwIconCustom icon = ( PwIconCustom ) customCache . get ( iconUuid ) ; if ( icon == null ) { icon = new PwIconCustom ( iconUuid , data ) ; customCache . put ( iconUuid , icon ) ; } else { icon . imageData = data ; } return icon ; } public void setIconData ( UUID iconUuid , byte [ ] data ) { getIcon ( iconUuid , data ) ; } public void put ( PwIconCustom icon ) { customCache . put ( icon . uuid , icon ) ; } }