public class AddSourceMojo extends AbstractMojo { @ Parameter ( property = "project" , required = true , readonly = true ) private MavenProject project ; @ Parameter ( defaultValue = "$ { project . build . sourceDirectory } / . . /scala" ) private File sourceDir ; @ Parameter ( defaultValue = "$ { project . build . testSourceDirectory } / . . /scala" ) private File testSourceDir ; @ Parameter ( property = "maven . scala . useCanonicalPath" , defaultValue = "true" ) private boolean useCanonicalPath ; @ Override public void execute ( ) { try { if ( sourceDir != null ) { final String path = FileUtils . pathOf ( sourceDir , useCanonicalPath ) ; if ( !project . getCompileSourceRoots ( ) . contains ( path ) ) { getLog ( ) . info ( "Add Source directory : " + path ) ; project . addCompileSourceRoot ( path ) ; } } if ( testSourceDir != null ) { final String path = FileUtils . pathOf ( testSourceDir , useCanonicalPath ) ; if ( !project . getTestCompileSourceRoots ( ) . contains ( path ) ) { getLog ( ) . info ( "Add Test Source directory : " + path ) ; project . addTestCompileSourceRoot ( path ) ; } } } catch ( final Exception exc ) { getLog ( ) . warn ( exc ) ; } } }