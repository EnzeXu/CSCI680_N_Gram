public class BackupAgent extends BackupAgentHelper { @Override public void onCreate() { Log.d("ConnectBot.BackupAgent", "onCreate called"); SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this); SharedPreferencesBackupHelper prefsHelper = new SharedPreferencesBackupHelper(this, getPackageName() + "_preferences"); addHelper(PreferenceConstants.BACKUP_PREF_KEY, prefsHelper); FileBackupHelper hosts = new FileBackupHelper(this, "../databases/" + HostDatabase.DB_NAME); addHelper(HostDatabase.DB_NAME, hosts); if (prefs.getBoolean(PreferenceConstants.BACKUP_KEYS, PreferenceConstants.BACKUP_KEYS_DEFAULT)) { FileBackupHelper pubkeys = new FileBackupHelper(this, "../databases/" + PubkeyDatabase.DB_NAME); addHelper(PubkeyDatabase.DB_NAME, pubkeys); } } }