public class Android11WarningFragment extends DialogFragment { int resId ; public static boolean showAndroid11Warning ( String filename ) { if ( EmptyUtils . isNullOrEmpty ( filename ) ) { return false ; } Uri fileUri = Uri . parse ( filename ) ; return showAndroid11Warning ( fileUri ) ; } public static boolean showAndroid11Warning ( Uri fileUri ) { if ( fileUri == null ) { return false ; } String scheme = fileUri . getScheme ( ) ; if ( scheme == null ) { return true ; } return scheme . equals ( "file" ) && showAndroid11WarningOnThisVersion ( ) ; } public static boolean showAndroid11WarningOnThisVersion ( ) { return ( Build . VERSION . SDK_INT > = Build . VERSION_CODES . R ) ; } public Android11WarningFragment ( ) { this . resId = R . string . Android11FileNotFound ; } public Android11WarningFragment ( int resId ) { this . resId = resId ; } @ NonNull @ Override public Dialog onCreateDialog ( @ Nullable Bundle savedInstanceState ) { AlertDialog . Builder builder = new AlertDialog . Builder ( getActivity ( ) ) ; builder . setMessage ( resId ) . setPositiveButton ( android . R . string . ok , new DialogInterface . OnClickListener ( ) { @ Override public void onClick ( DialogInterface dialogInterface , int i ) { dialogInterface . dismiss ( ) ; } } ) ; return builder . create ( ) ; } }