public class BoundingBoxGeoHashIterator implements Iterator<GeoHash> { private TwoGeoHashBoundingBox boundingBox; private GeoHash current; public BoundingBoxGeoHashIterator(TwoGeoHashBoundingBox bbox) { boundingBox = bbox; current = bbox.getSouthWestCorner(); } public TwoGeoHashBoundingBox getBoundingBox() { return boundingBox; } @Override public boolean hasNext() { return current != null; } @Override public GeoHash next() { if (!hasNext()) { throw new NoSuchElementException(); } GeoHash rv = current; if (rv.equals(boundingBox.getNorthEastCorner())) { current = null; } else { current = rv.next(); while (hasNext() && !boundingBox.getBoundingBox().contains(current.getOriginatingPoint())) { current = current.next(); } } return rv; } @Override public void remove() { throw new UnsupportedOperationException(); } }